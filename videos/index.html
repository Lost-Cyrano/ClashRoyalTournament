<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pr√©sentation des Joueurs - MDL 2026</title>
    <style>
        :root {
            --primary: #ffcc00;
            --secondary: #8a2be2;
            --dark: #1a1a2e;
            --light: #f8f9fa;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: url('https://lost-cyrano.github.io/ClashRoyalTournament/background.jpeg') no-repeat center center fixed;
            background-size: cover;
            color: var(--light);
            line-height: 1.6;
            min-height: 100vh;
            position: relative;
        }
        
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 26, 46, 0.85);
            z-index: -1;
        }
        
        .container {
            width: 95%;
            max-width: 600px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .logo-title {
            width: 100%;
            max-width: 300px;
            margin-bottom: 0.5rem;
        }
        
        .tournament-title {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .tournament-icon {
            width: 40px;
            height: 40px;
            object-fit: contain;
        }
        
        h1 {
            text-align: center;
            font-size: 1.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            color: var(--primary);
        }
        
        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 2px solid var(--primary);
            position: relative;
            overflow: hidden;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .input-row {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        .input-label {
            min-width: 80px;
            font-weight: 600;
            color: var(--primary);
        }
        
        .number-input {
            flex: 1;
            padding: 0.8rem;
            border: 2px solid var(--primary);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            font-size: 1rem;
            text-align: center;
        }
        
        .number-input:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 10px rgba(138, 43, 226, 0.5);
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.8rem 1.5rem;
            background: linear-gradient(to right, var(--primary), #ffaa00);
            color: var(--dark);
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            width: 100%;
            justify-content: center;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Styles pour la pr√©sentation plein √©cran */
        .presentation-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            z-index: 1000;
            display: none;
        }
        
        .video-player {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .player-name {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem;
            font-weight: bold;
            color: var(--primary);
            text-shadow: 3px 3px 0 var(--secondary), 
                         6px 6px 0 rgba(0, 0, 0, 0.5);
            text-align: center;
            opacity: 0;
            z-index: 1001;
        }
        
        .black-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            z-index: 999;
            opacity: 0;
            display: none;
        }
        
        footer {
            text-align: center;
            margin-top: 1rem;
            padding: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
        }
        
        footer p {
            margin-bottom: 0.3rem;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        .fade-in {
            animation: fadeIn 2s ease-in-out forwards;
        }
        
        .fade-out {
            animation: fadeOut 1s ease-in-out forwards;
        }
        
        /* Version desktop */
        @media (min-width: 768px) {
            .container {
                max-width: 500px;
            }
            
            .input-row {
                flex-direction: row;
            }
            
            .btn {
                width: auto;
                padding: 0.8rem 2rem;
            }
            
            .player-name {
                font-size: 5rem;
            }
        }
        
        /* Tr√®s petits √©crans */
        @media (max-width: 360px) {
            .container {
                padding: 0.5rem;
            }
            
            .card {
                padding: 1rem;
            }
            
            .tournament-icon {
                width: 30px;
                height: 30px;
            }
            
            h1 {
                font-size: 1.3rem;
            }
            
            .player-name {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo-container">
            <img src="https://github.com/Lost-Cyrano/ClashRoyalTournament/blob/main/images__4_-removebg-preview.png?raw=true" alt="Clash Royale" class="logo-title">
            <div class="tournament-title">
                <img src="https://github.com/Lost-Cyrano/ClashRoyalTournament/blob/main/logoTournament.png?raw=true" alt="Tournoi" class="tournament-icon">
                <h1>PR√âSENTATION DES JOUEURS</h1>
                <img src="https://github.com/Lost-Cyrano/ClashRoyalTournament/blob/main/logoTournament.png?raw=true" alt="Tournoi" class="tournament-icon">
            </div>
        </div>
        
        <div class="card">
            <div class="input-group">
                <div class="input-row">
                    <span class="input-label">Joueur 1 :</span>
                    <input type="number" id="player1" class="number-input" placeholder="Num√©ro du joueur" min="1" max="31">
                </div>
                <div class="input-row">
                    <span class="input-label">Joueur 2 :</span>
                    <input type="number" id="player2" class="number-input" placeholder="Num√©ro du joueur" min="1" max="31">
                </div>
            </div>
            
            <button class="btn" id="start-btn">
                <span>üé¨</span> Lancer les Pr√©sentations
            </button>
        </div>
        
        <footer>
            <p>MDL 2026 - Maison des Lyc√©ens | Tournoi Clash Royal</p>
            <p>Pour toute question, contactez-nous √† anaelmaire.pro@gmail.com</p>
        </footer>
    </div>

    <!-- Conteneur pour la pr√©sentation plein √©cran -->
    <div class="presentation-container" id="presentation-container">
        <video class="video-player" id="video-player" muted></video>
        <div class="player-name" id="player-name"></div>
    </div>
    
    <!-- √âcran noir pour les transitions -->
    <div class="black-screen" id="black-screen"></div>

    <script>
        // Donn√©es des joueurs
        let playersData = {};
        let currentPlayerIndex = 0;
        let currentPlayers = [];

        // √âl√©ments DOM
        const player1Input = document.getElementById('player1');
        const player2Input = document.getElementById('player2');
        const startBtn = document.getElementById('start-btn');
        const presentationContainer = document.getElementById('presentation-container');
        const videoPlayer = document.getElementById('video-player');
        const playerName = document.getElementById('player-name');
        const blackScreen = document.getElementById('black-screen');

        // Charger les donn√©es JSON depuis l'URL correcte
        async function loadPlayersData() {
            try {
                const response = await fetch('https://lost-cyrano.github.io/ClashRoyalTournament/videos/playeurs.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                playersData = await response.json();
                console.log('Donn√©es des joueurs charg√©es:', playersData);
                startBtn.disabled = false;
            } catch (error) {
                console.error('Erreur lors du chargement des donn√©es:', error);
                alert('Erreur lors du chargement des donn√©es des joueurs: ' + error.message);
                startBtn.disabled = true;
            }
        }

        // D√©marrer les pr√©sentations
        startBtn.addEventListener('click', function() {
            const p1 = player1Input.value;
            const p2 = player2Input.value;
            
            if (!p1 || !p2) {
                alert('Veuillez saisir les num√©ros des deux joueurs');
                return;
            }
            
            if (!playersData[p1] || !playersData[p2]) {
                alert('Un ou plusieurs num√©ros de joueur sont invalides');
                return;
            }
            
            currentPlayers = [
                { number: p1, data: playersData[p1] },
                { number: p2, data: playersData[p2] }
            ];
            
            currentPlayerIndex = 0;
            startPresentation();
        });

        // D√©marrer la pr√©sentation
        function startPresentation() {
            presentationContainer.style.display = 'block';
            document.body.style.overflow = 'hidden';
            playNextPlayer();
        }

        // Jouer le prochain joueur
        function playNextPlayer() {
            if (currentPlayerIndex >= currentPlayers.length) {
                // Tous les joueurs ont √©t√© pr√©sent√©s
                endPresentation();
                return;
            }
            
            const player = currentPlayers[currentPlayerIndex];
            // Utiliser le chemin complet depuis GitHub
            const videoPath = `https://lost-cyrano.github.io/ClashRoyalTournament/videos/bibli/${player.data[1]}`;
            
            console.log('Chargement vid√©o:', videoPath);
            
            // Afficher le nom du joueur
            playerName.textContent = player.data[0];
            playerName.style.opacity = '0';
            
            // Configurer la vid√©o
            videoPlayer.src = videoPath;
            videoPlayer.muted = false; // Activer le son
            videoPlayer.currentTime = 0;
            
            // R√©initialiser les √©v√©nements
            videoPlayer.onloadeddata = null;
            videoPlayer.onerror = null;
            videoPlayer.onended = null;
            
            videoPlayer.onloadeddata = function() {
                console.log('Vid√©o charg√©e:', videoPath);
                // Fondu d'entr√©e du nom
                setTimeout(() => {
                    playerName.classList.remove('fade-out');
                    playerName.classList.add('fade-in');
                    
                    // Lancer la vid√©o apr√®s l'apparition du nom
                    setTimeout(() => {
                        videoPlayer.play().catch(e => {
                            console.error('Erreur de lecture vid√©o:', e);
                            // Continuer m√™me en cas d'erreur
                            setTimeout(() => {
                                videoEnded();
                            }, 3000);
                        });
                    }, 500);
                }, 100);
            };
            
            videoPlayer.onerror = function() {
                console.error('Erreur de chargement vid√©o:', videoPath);
                // Afficher un message d'erreur mais continuer
                playerName.textContent = `${player.data[0]} (vid√©o non disponible)`;
                playerName.classList.remove('fade-out');
                playerName.classList.add('fade-in');
                
                setTimeout(() => {
                    videoEnded();
                }, 3000);
            };
            
            videoPlayer.onended = function() {
                console.log('Vid√©o termin√©e:', videoPath);
                videoEnded();
            };
            
            function videoEnded() {
                // Fondu de sortie
                playerName.classList.remove('fade-in');
                playerName.classList.add('fade-out');
                
                // Fondu au noir
                blackScreen.style.display = 'block';
                blackScreen.classList.remove('fade-out');
                blackScreen.classList.add('fade-in');
                
                setTimeout(() => {
                    currentPlayerIndex++;
                    blackScreen.classList.remove('fade-in');
                    blackScreen.classList.add('fade-out');
                    
                    setTimeout(() => {
                        blackScreen.style.display = 'none';
                        playNextPlayer();
                    }, 1000);
                }, 1000);
            }
        }

        // Terminer la pr√©sentation
        function endPresentation() {
            presentationContainer.style.display = 'none';
            document.body.style.overflow = 'auto';
            
            // R√©initialiser les champs pour la prochaine pr√©sentation
            player1Input.value = '';
            player2Input.value = '';
            player1Input.focus();
            
            // Petit d√©lai avant l'alerte pour laisser le temps √† l'√©cran de dispara√Ætre
            setTimeout(() => {
                alert('Pr√©sentations termin√©es ! Pr√™t pour la prochaine paire de joueurs.');
            }, 500);
        }

        // Raccourci clavier : Entr√©e pour lancer
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && presentationContainer.style.display !== 'block') {
                startBtn.click();
            }
            
            // √âchap pour quitter le mode pr√©sentation
            if (e.key === 'Escape' && presentationContainer.style.display === 'block') {
                endPresentation();
            }
        });

        // Charger les donn√©es au d√©marrage
        loadPlayersData();
    </script>
</body>
</html>
